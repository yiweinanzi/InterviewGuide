---
import questionsData from '../../data/questions.json';
import QuestionCard from '../../components/questions/QuestionCard.astro';
import { applyQuestionFilters } from '../../components/filters/FilterBar';
import Layout from '../../layouts/Layout.astro';
import { withBase } from '../../lib/path';

interface QuestionItem {
  id: string;
  title: string;
  frequency: number;
  categoryKey: string;
  categoryName: string;
  companies: string[];
  variants: string[];
  isHighFrequency: boolean;
}

const allQuestions = (questionsData as QuestionItem[]).slice().sort((a, b) => b.frequency - a.frequency);
const hotQuestions = applyQuestionFilters(allQuestions, { minFrequency: 5 }).slice(0, 1200);
---

<Layout title="高频优先 | InterviewGuide" description="按出现频次优先刷题">
  <section class="py-12 px-6">
    <div class="max-w-6xl mx-auto">
      <div class="flex items-center justify-between gap-4 flex-wrap mb-6">
        <div>
          <h1 class="text-3xl md:text-4xl font-bold">高频优先刷题</h1>
          <p class="text-slate-600 mt-2">按出现频次排序，默认展示高频题前 1200 条。</p>
        </div>
        <a href={withBase('/companies')} class="text-sm text-indigo-600 hover:underline">返回公司定向</a>
      </div>

      <div id="hot-list" class="grid gap-3">
        {hotQuestions.map((question) => (
          <div class="hot-item" data-title={question.title.toLowerCase()}>
            <QuestionCard
              id={question.id}
              title={question.title}
              frequency={question.frequency}
              categoryName={question.categoryName}
              companies={question.companies}
            />
          </div>
        ))}
      </div>
    </div>
  </section>
</Layout>
