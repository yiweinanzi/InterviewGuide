# InterviewGuide V1 设计文档

日期：2026-02-26  
状态：已评审通过（用户确认）

## 1. 目标与范围

### 1.1 项目目标
构建一个面向 AI 算法岗面试准备的网站 InterviewGuide，整体风格参考 `ai-research-ebook-dev`，但视觉和交互更现代，后续集成到 AgentGuide 生态。

### 1.2 V1 必须覆盖
- 三条主链路同时可用：
  - 公司定向（默认入口）
  - 高频优先
  - 知识点学习
- 题目学习主链路：题干、变体、出现公司、频次、收藏/完成。
- 学习进度看板：完成率、收藏、最近学习、公司/知识点维度进度。
- 数据更新入口：管理员页面（前端口令门禁，弱安全）+ 自动化更新队列。
- 部署策略：先独立部署验证，再子路径集成到 AgentGuide（`/interview/`）。

### 1.3 V1 不做
- 普通用户登录体系。
- 完整标准答案库（仅预留位）。
- 强安全后台（后续版本升级）。

## 2. 数据范围与过滤策略

### 2.1 保留分类
- NLP与大模型
- 机器学习基础
- 深度学习
- 推荐系统
- 计算机视觉
- 机器学习系统
- 项目与行为面试
- 编程与算法
- AI 系统设计（从 `system_design` 和 `uncertain` 中关键词筛入）

### 2.2 过滤分类
- 明确后端/前端/C++ 专向题
- 与 AI 面试准备无关的系统题

### 2.3 AI 系统设计关键词筛（首版）
关键词组（可持续迭代）：
- LLM/Agent/RAG/Embedding/向量检索
- 推理服务/模型部署/Serving/在线推理
- 训练系统/分布式训练/参数高效微调
- 推荐系统架构/搜索架构/召回排序
- 数据闭环/评测体系/监控告警

## 3. 信息架构与页面设计

### 3.1 导航结构
- 首页
- 公司定向（默认落地）
- 高频优先
- 知识点学习
- 进度
- 管理员入口（隐藏或弱曝光）

### 3.2 核心页面
- 首页：站点定位、三入口、统计概览。
- 公司定向页：公司列表、公司内高频题、公司题目集合。
- 高频页：按出现次数排序，支持筛选。
- 知识点页：按分类进入题目集合。
- 题目详情页：题干、变体、公司覆盖、频次、收藏/完成、答案占位。
- 进度页：完成度与回顾入口。
- 管理页：新增面经提交、更新任务记录。

## 4. 技术架构

### 4.1 前端
- 基于 Astro + Tailwind（沿用现有技术栈）。
- 静态构建，客户端小脚本处理筛选、标记、进度统计。
- 本地状态：`localStorage` 记录收藏/完成/最近学习。

### 4.2 数据产物（构建期）
由脚本从 `result/output` 生成：
- `src/data/questions.json`
- `src/data/companies.json`
- `src/data/categories.json`
- `src/data/stats.json`
- `src/data/search-index.json`

### 4.3 更新入口与自动化链路（方案 A）
- 管理员在 `/admin` 提交新增面经。
- 生成结构化更新任务（优先 GitHub Issue 模板，或提交为 JSON 任务文件）。
- GitHub Action 消费任务，触发 `mianjing/ai_interview_pipeline`（含 DeepSeek 解析）。
- 汇总产物更新后，执行 InterviewGuide 数据转换脚本并提交结果。

## 5. 持久化开发流程（防会话丢失）

在 `InterviewGuide/` 根目录引入三文件流程：
- `AGENT.MD`：会话内强约束流程。
- `task.json`：任务源，支持 `pending/in_progress/done/blocked`。
- `progress.txt`：按时间追加开发日志。

执行规则：
1. 每次会话只处理一个任务。
2. 任务完成时，代码改动 + `task.json` + `progress.txt` 必须同一 commit。
3. 若阻塞，标记 `blocked`，写明阻塞原因与恢复步骤。

## 6. 组件与模块划分

- `src/components/navigation/*`：站点导航、侧边/顶部菜单。
- `src/components/questions/*`：题卡、题目详情、标记按钮。
- `src/components/filters/*`：搜索、公司筛选、分类筛选、频次筛选。
- `src/components/progress/*`：进度图表与最近学习。
- `src/components/admin/*`：管理提交表单与任务状态。
- `scripts/*`：数据清洗、分类过滤、索引构建。

## 7. 数据流

### 7.1 学习数据流
`result/output/*.md` -> `scripts/transform` -> `src/data/*.json` -> Astro 构建 -> 页面筛选与展示。

### 7.2 进度数据流
用户点击收藏/完成 -> `localStorage` -> 页面实时统计 -> 进度页聚合。

### 7.3 更新数据流
管理员提交 -> 更新任务 -> pipeline + DeepSeek -> 新汇总 -> 再构建部署。

## 8. 错误处理与可靠性

- 管理页提交失败：显示错误码与重试建议。
- 更新任务失败：记录失败状态与日志链接（Action URL）。
- 数据转换失败：构建阶段 hard fail，阻止错误数据上线。
- 关键词误筛：保留人工修订入口（关键词配置文件 + 白名单机制）。

## 9. 安全与合规

- V1 管理口令是弱安全，仅用于降低误操作，不作为强鉴权。
- API Key 一律通过环境变量，不提交仓库。
- 已发现 `mianjing/ds_api.py` 中存在明文 key，需第一时间轮换并下线明文写法。

## 10. 测试与验收

### 10.1 构建验收
- `npm run build` 成功。
- 关键页面可访问且无运行时报错。

### 10.2 功能验收
- 公司定向、高频优先、知识点学习三链路都可用。
- 默认入口为公司定向。
- 搜索/筛选正常。
- 题目详情与收藏/完成可用。
- 进度页统计准确。
- 管理页可提交更新任务。

### 10.3 集成验收
- 独立部署地址可访问。
- 子路径集成到 AgentGuide（`/interview/`）后路径与资源加载正常。

## 11. 迭代规划

### Phase 1
- 建立持久化流程文件（`AGENT.MD`/`task.json`/`progress.txt`）。
- 完成 V1 前端主链路与数据转换脚本。

### Phase 2
- 打通管理员更新入口到自动化任务。
- 独立部署验证。

### Phase 3
- 集成到 AgentGuide 子路径。
- 预留答案体系字段，进入答案增强版本。

## 12. 关键决策记录

- 数据范围：仅 AI 核心 + AI 系统设计（关键词自动筛）。
- 默认入口：公司定向。
- 集成策略：先独立部署，后子路径集成。
- 账号策略：仅管理员口令门禁（V1）。
- 更新机制：方案 A（静态站 + GitHub 自动化更新队列）。
